<semantic-form
  new-subject-template='https://archipelago.itatti.harvard.edu/resource/builtwork/{{{{raw}}}}{{UUID}}{{{{/raw}}}}'
  fields='[[ fieldDefinitions
    type="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"
    label="http://www.researchspace.org/pattern/general/rdfs:label"
    builtwork_has_material="https://archipelago.itatti.harvard.edu/container/fieldDefinitionContainer/builtwork_has_material"
    builtwork_construction="https://archipelago.itatti.harvard.edu/container/fieldDefinitionContainer/builtwork_construction"
    builtwork_destruction="https://archipelago.itatti.harvard.edu/container/fieldDefinitionContainer/builtwork_destruction"
    builtwork_has_transformation="https://archipelago.itatti.harvard.edu/container/fieldDefinitionContainer/builtwork_has_transformation"
    builtwork_has_st-volume="https://archipelago.itatti.harvard.edu/container/fieldDefinitionContainer/builtwork_has_st-volume"
    entity_is_complete="https://archipelago.itatti.harvard.edu/container/fieldDefinitionContainer/entity_is_complete"
  ]]'
  [[>rsp:FormDefaults]]
  >

  <div class="form-scroll-area">
    <semantic-form-hidden-input for="type" default-values='["http://www.cidoc-crm.org/cidoc-crm/E22_Man-Made_Object","https://archipelago.itatti.harvard.edu/arconto#Builtwork"]'></semantic-form-hidden-input>

    <bs-tab-container id="some-ide" class="bs-left-vertical-tabs" default-active-key="info">
      <bs-row class="clearfix">

        <semantic-form-drag-and-drop-input 
          label="Visual Representation"
          render-header="false"
          for="builtwork_has_st-volume" 
          nested-form-template='{{> st_volume nested=true editable=true}}'>

            <template id="st_volume">
              <semantic-form 
                persistence='{"type": "sparql", "targetInsertGraphIri": "http://www.researchspace.org/ns/data-updates-graph"}'
                new-subject-template='/EX_Digital_Image/{{{{raw}}}}{{UUID}}{{{{/raw}}}}'
                fields='[[
                    fieldDefinitions
                    label="http://www.w3.org/2000/01/rdf-schema#label"
                    P3_has_note="http://www.cidoc-crm.org/cidoc-crm/P3_has_note"
                    P1_is_identified_by="http://www.cidoc-crm.org/cidoc-crm/P1_is_identified_by"
                    type="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"
                ]]'
                [[> rsp:FormDefaults]]
              >
                <div class="form-scroll-area">
                  <semantic-form-hidden-input for='type' default-values='["http://www.researchspace.org/ontology/EX_Digital_Image"]'> </semantic-form-hidden-input>
                  <semantic-form-file-input 
                    label="Image"
                    render-header="false"
                    for='P1_is_identified_by' 
                    storage='images'
                    temp-storage='tmp'
                    placeholder='Please drag&drop your image file here.'
                    name-predicate-iri='http://www.researchspace.org/ontology/PX_has_file_name'
                    media-type-predicate-iri='http://www.researchspace.org/ontology/PX_has_media_type'
                    resource-query='
                      PREFIX rso: <http://www.researchspace.org/ontology/>
                      CONSTRUCT {
                        ?__resourceIri__ a rso:EX_File.
                        ?__resourceIri__ rso:PX_has_file_name ?__fileName__.
                        ?__resourceIri__ rso:PX_has_media_type ?__mediaType__.
                      } WHERE {}
                    '
                    generate-iri-query='
                      SELECT ?resourceIri {
                        BIND(IRI(CONCAT(STR(Default:), "EX_File/", ?__fileName__)) AS ?resourceIri) .
                      }
                    '
                  ></semantic-form-file-input>
                  <semantic-form-text-input label="Caption" for='label'></semantic-form-text-input>
                  <semantic-form-errors></semantic-form-errors>
              </div>
                
              [[> rsp:FormDefaultActions assetForm=true assetStorage='images']] 
              </semantic-form>
            </template>
          

        </semantic-form-drag-and-drop-input>


      </bs-row>
    </bs-tab-container>


  </div>

  [[> rsp:FormDefaultActions]]
</semantic-form>