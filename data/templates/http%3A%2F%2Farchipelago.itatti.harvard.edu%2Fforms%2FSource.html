<semantic-form
  new-subject-template='https://archipelago.itatti.harvard.edu/resource/source/{{{{raw}}}}{{UUID}}{{{{/raw}}}}'
  fields='[[ fieldDefinitions
    type="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"
    label="https://archipelago.itatti.harvard.edu/container/fieldDefinitionContainer/archipelago_label"

    source_identifier="https://archipelago.itatti.harvard.edu/container/fieldDefinitionContainer/archipelago_label_single"
    source_original_title="https://archipelago.itatti.harvard.edu/container/fieldDefinitionContainer/source_original_title"
    source_attributed_title="https://archipelago.itatti.harvard.edu/container/fieldDefinitionContainer/source_attributed_title"

    has_type="https://archipelago.itatti.harvard.edu/container/fieldDefinitionContainer/actor_titles2"
    is_subject_of="http://www.cidoc-crm.org/cidoc-crm/P129i_is_subject_of"
    builtwork_construction="https://archipelago.itatti.harvard.edu/container/fieldDefinitionContainer/builtwork_construction"
    source_location="https://archipelago.itatti.harvard.edu/container/fieldDefinitionContainer/source_location"
    P138i_has_representation="http://www.cidoc-crm.org/cidoc-crm/P138i_has_representation"
    source_was_measured_by="https://archipelago.itatti.harvard.edu/container/fieldDefinitionContainer/source_was_measured_by"
    
    related_actors="https://archipelago.itatti.harvard.edu/container/fieldDefinitionContainer/source_related_actor"
    related_events="https://archipelago.itatti.harvard.edu/container/fieldDefinitionContainer/source_related_events"
    related_builtworks="https://archipelago.itatti.harvard.edu/container/fieldDefinitionContainer/source_related_builtworks"

    source_synopsis="https://archipelago.itatti.harvard.edu/container/fieldDefinitionContainer/source_synopsis"
  ]]'
  [[>rsp:FormDefaults]]
>
<div class="form-scroll-area">
  

  <semantic-form-hidden-input for="type" default-values='["http://www.cidoc-crm.org/cidoc-crm/E22_Man-Made_Object","https://archipelago.itatti.harvard.edu/arconto#Source"]'></semantic-form-hidden-input>

  <div class="container-fluid">
    <bs-row id="form-body">

      <semantic-form-errors></semantic-form-errors>

      <bs-col sm="12" md="9">

        <bs-row>
          <!-- Visual Representation -->
          <bs-col xs="6" sm="3" md="2">
            <semantic-form-drag-and-drop-input 
              label="Visual Representation"
              for="P138i_has_representation" 
              nested-form-template='{{> forms:Image nested=true editable=true}}'>
            </semantic-form-drag-and-drop-input>
          </bs-col>

          <bs-col xs="6" sm="9" md="10">

            <bs-row>

              <!-- Title -->
              <bs-col sm="12" md="12" lg="6">
                <semantic-form-text-input label="Attributed Title" for="source_identifier"></semantic-form-text-input>
              </bs-col>

              <!-- Original Title-->
              <bs-col sm="12" md="12" lg="6">
                <semantic-form-composite-input
                  for="source_original_title"
                  label="Original Title"
                  new-subject-template="/original_title"
                  fields='[[ fieldDefinitions
                    type="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"
                    label="https://archipelago.itatti.harvard.edu/container/fieldDefinitionContainer/archipelago_label_single" 
                    has_type="http://www.cidoc-crm.org/cidoc-crm/P2_has_type"
                  ]]'
                >
                  <semantic-form-hidden-input for="type" default-value='http://www.cidoc-crm.org/cidoc-crm/E41_Appellation'></semantic-form-hidden-input> 
                  <semantic-form-hidden-input for="has_type" default-value='https://archipelago.itatti.harvard.edu/resource/type/original_title'></semantic-form-hidden-input> 
      
                  <semantic-form-text-input render-header="false" languages='["en", "it"]' label="Title" for="label"></semantic-form-text-input>
                </semantic-form-composite-input>
              </bs-col>

            </bs-row>

            <!-- Archival Location -->
            <bs-row>
              <semantic-form-tree-picker-input 
                label="Archival Location" 
                for='source_location'
                tree-patterns='{
                  "relationPattern": "?item crm:P46i_forms_part_of ?parent", 
                  "schemePattern": "?item crm:P71i_is_listed_in <http://www.researchspace.org/resource/vocab/archives>"
                }'>
              </semantic-form-tree-picker-input>
            </bs-row>

            <!-- Synopsis and Transcription -->
            <bs-row>
              <bs-tabs id="tabs">
                <bs-tab event-key="1" title="Synopsis">
                  <semantic-form-text-input render-header="false" label="Synopsis" for="source_synopsis" multiline="true" placeholder="Insert synopsis"></semantic-form-text-input>
                </bs-tab>
                <bs-tab event-key="2" title="Transcription">
                  
                </bs-tab>
              </bs-tabs>
            </bs-row>



          </bs-col>

        </bs-row>

        <semantic-form-composite-input
          for="builtwork_construction"
          label="Creation date and Authors"
          new-subject-template="/production"
          fields='[[ fieldDefinitions
            type="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"
            builtwork_construction_actor_role="https://archipelago.itatti.harvard.edu/container/fieldDefinitionContainer/builtwork_construction_actor_role"
            builtwork_has_time-span="https://archipelago.itatti.harvard.edu/container/fieldDefinitionContainer/builtwork_has_time-span"
          ]]'
        >

          <semantic-form-hidden-input for="type" default-value="http://www.cidoc-crm.org/cidoc-crm/E12_Production"></semantic-form-hidden-input>

          <!-- Date -->
          <semantic-form-composite-input
            for="builtwork_has_time-span"
            new-subject-template="/date"
            render-header="false"
            fields='[[ fieldDefinitions 
              type="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"
              builtwork_date_end_of_the_begin="https://archipelago.itatti.harvard.edu/container/fieldDefinitionContainer/builtwork_date_end_of_the_begin"
            ]]'
          >
            <semantic-form-hidden-input for="type" default-value="http://www.cidoc-crm.org/cidoc-crm/E4_Time-span"></semantic-form-hidden-input> 
            <semantic-form-datetime-input label="Date" for='builtwork_date_end_of_the_begin' placeholder="YYYY-MM-DD"></semantic-form-datetime-input>

          </semantic-form-composite-input>

          <!-- Actors -->
          <semantic-form-composite-input
            for="builtwork_construction_actor_role"
            new-subject-template="/actor_role/{{{{raw}}}}{{UUID}}{{{{/raw}}}}"
            label="Author"
            fields='[[ fieldDefinitions
              type="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"
              builtwork_construction_actor-role_actor="https://archipelago.itatti.harvard.edu/container/fieldDefinitionContainer/builtwork_construction_actor-role_actor"
              builtwork_construction_actor-role_role="https://archipelago.itatti.harvard.edu/container/fieldDefinitionContainer/builtwork_construction_actor-role_role"
            ]]'
          >
            <semantic-form-hidden-input for="type" default-value="http://www.cidoc-crm.org/crmpc/PC14_carried_out_by"></semantic-form-hidden-input>

            <!-- Add an existing or create a new one-->
            <semantic-form-drag-and-drop-input
              render-header="false"
              for='builtwork_construction_actor-role_actor'
            ></semantic-form-drag-and-drop-input>
            
            <!-- Role -->
            <semantic-form-tree-picker-input 
            label="With role" 
            for='builtwork_construction_actor-role_role'
            tree-patterns='{
              "relationPattern": "?item crm:P46i_forms_part_of ?parent", 
              "schemePattern": "?item crm:P71i_is_listed_in <http://www.researchspace.org/resource/vocab/actor_types>"
            }'>
          </semantic-form-tree-picker-input>

          </semantic-form-composite-input>

        </semantic-form-composite-input>

      </bs-col>
      
      <!-- Related entities -->
      <bs-col sm="12" md="3">
        <h3>Related entities</h3>

        <bs-tabs id="tabs">

          <bs-tab event-key="1" title="Actors">
            <semantic-form-drag-and-drop-input 
              for="related_actors">
            </semantic-form-drag-and-drop-input> 
          </bs-tab>

          <bs-tab event-key="2" title="Sources">
          </bs-tab>

          <bs-tab event-key="3" title="Builtworks">
          </bs-tab>
        </bs-tabs>
      </bs-col>


    </bs-row>


  </div>

</div>

[[> rsp:FormDefaultActions]]
</semantic-form>

<style>
  #form-body{
    margin-top: 50px;
  }

  .margin-top{
    margin-top: 40px;
  }
</style>