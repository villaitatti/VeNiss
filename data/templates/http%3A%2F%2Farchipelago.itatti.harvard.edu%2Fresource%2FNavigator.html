<mp-event-target-template-render id='sidebar' template='{{> sidebar_tmpl}}'>
    <template id='sidebar_tmpl'>
        <div>
            {{#each results}} 
                <semantic-query
                    query='
                    SELECT ?bw_id_lbl ?bw_name ?construction_date_lbl ?destruction_date_lbl WHERE {

                        bind("{{subject.value}}" as ?bw_id_lbl)
                        
                        ?bw_id rdfs:label ?bw_id_lbl.
                        ?bw crm:P1_is_identified_by ?bw_id.
                        ?bw rdfs:label ?bw_name.
                        
                        ?bw crm:P108i_was_produced_by ?construction.
                        ?construction crm:P4_has_time-span ?construction_date.
                        ?construction_date crm:P82a_begin_of_the_begin ?construction_date_lbl.
                        
                        ?bw crm:P12i_was_present_at ?function.
                        ?function a crm:E5_Event.
                        ?function rdfs:label ?function_lbl
                        
                        optional{
                             ?bw crm:P13i_was_destroyed_by ?destruction.
                          ?destruction crm:P4_has_time-span ?destruction_date.
                          ?destruction_date crm:P82b_end_of_the_end ?destruction_date_lbl
                        }
                      }
                    '
                    template='{{> displayer}}'>
                        <template id='displayer'>
                            <div>
                                {{#each bindings}}
                                    <h3>{{bw_name.value}} ({{bw_id_lbl.value}})</h3>
                                    <p><strong>Constructed:</strong> {{construction_date_lbl.value}}</p>
                                    <p><strong>Demolished:</strong> {{destruction_date_lbl.value}}</p>
                                    <p><strong>Function:</strong> {{function_lbl.value}}</p>
                                {{/each}}
                            </div>
                            <hr>
                        </template>
                </semantic-query>
            {{/each}}
        </div>
    </template>
</mp-event-target-template-render>



</semantic-query>