<bs-row>
    <bs-col xs=12>

        <semantic-form new-subject-template='https://veniss.net/resource/builtwork/{{{{raw}}}}{{UUID}}{{{{/raw}}}}'
            id='{{viewId}}-vocab-form' post-action="event" subject='{{node}}' fields="[[fieldDefinitions
            type = 'http://www.w3.org/1999/02/22-rdf-syntax-ns#type'
            full_name = 'https://veniss.net/container/fieldDefinitionContainer/builtwork_island_full_name'
            island_label = 'https://veniss.net/container/fieldDefinitionContainer/builtwork_island_label'
            island_geonames='https://veniss.net/container/fieldDefinitionContainer/geonames_island'
            island_latitude='https://veniss.net/container/fieldDefinitionContainer/latitude_island'
            island_longitude='https://veniss.net/container/fieldDefinitionContainer/longitude_island'
            ]]">
            <bs-panel>
                <div class="row">

                    <div class="col-md-6">
                        <h3>Builtwork Data</h3>
                        <label style="color: lightsteelblue;">Entity URI: </label>
                        <p style="color: lightsteelblue;">{{node}}</p>
                        <!-- Form notifications  -->
                        <semantic-form-recover-notification></semantic-form-recover-notification>
                        <semantic-form-errors></semantic-form-errors>
                        <!-- End form notifications -->

                        <semantic-form-hidden-input for="type" default-values='["https://veniss.net/ontology#Island","http://www.cidoc-crm.org/P53_Place"]'>
                        </semantic-form-hidden-input>
                        <semantic-form-text-input for="full_name" placeholder="Enter island's full name here...">
                        </semantic-form-text-input>
                        <div class="row">
                            <div class="col-md-6">
                                <semantic-form-text-input for="island_latitude"
                                    placeholder="Enter island's latitude...">
                                </semantic-form-text-input>
                            </div>
                            <div class="col-md-6">
                                <semantic-form-text-input for="island_longitude"
                                    placeholder="Enter island's longitude...">
                                </semantic-form-text-input>
                            </div>
                        </div>

                        <semantic-form-text-input for="island_label"
                            placeholder="Enter island's label (only lowercase letters)"></semantic-form-text-input>
                            <semantic-form-text-input for="island_geonames"></semantic-form-text-input>
                        
                            <!-- <semantic-context repository='sari-rds'>
                            <semantic-form-autocomplete-input for="island_geonames" label="Geonames Identifier"
                                placeholder="Search for a geonames ID..."></semantic-form-autocomplete-input>
                        </semantic-context> -->

                        {{#if node}}
                        <semantic-query query='SELECT ?item ?label {
                            <{{node}}> rdfs:label ?label.
                            } LIMIT 1' template='{{> phases}}'>
                            <template id='phases'>
        
                                {{#each bindings}}
                                <p></p>

                                <div style='height: 20vw;'>
                                    <h3>Phases</h3>
                                    <semantic-context repository="ephedra">
                                        <semantic-map-classic id='segunda' fix-zoom-level="12"
                                            query='
                                    PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
                                    PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                                    PREFIX crm: <http://www.cidoc-crm.org/cidoc-crm/>
                                    SELECT DISTINCT ?wkt ?bw_id WHERE {
                                      SERVICE <http://www.researchspace.org/resource/system/repository/federation#geosql> {
                                        ?root rs_sql_sail:hasQueryId "{{label.value}}_island_shapes";
                                        veniss_sql:wkt ?wkt;
                                        veniss_sql:bw_id ?bw_id;
                                      }
                                    }'>
                                        </semantic-map-classic>
                                    </semantic-context>
                                </div>
                                {{/each}}
                            </template>
                        </semantic-query>
                        {{/if}}
                    </div>
                    <div class="col-md-6">
                        <h3>Island Location</h3>
                        {{#if node}}
                        <semantic-query query='
                            SELECT ?item ?label ?longitude_label ?latitude_label ?geonames_label ?node {
                            ?node a <https://veniss.net/ontology#Island>.
                            ?node rdfs:label ?label.

                            OPTIONAL {
                                ?node crm:P87_is_identified_by ?latitude.
                                ?latitude crm:P2_has_type <https://veniss.net/ontology#latitude>.
                                ?latitude rdfs:label ?latitude_label. 
                                ?node crm:P87_is_identified_by ?longitude.
                                ?longitude crm:P2_has_type <https://veniss.net/ontology#longitude>.
                                ?longitude rdfs:label ?longitude_label. 
                              }
                              OPTIONAL {
                                ?node crm:P48_has_preferred_identifier ?geonames_identifier.
                                ?geonames_identifier rdfs:label ?geonames_label.
                              }

                            BIND(<{{node}}> as ?node).
                        }' template='{{> island_location_template}}'>
                            <template id='island_location_template'>
                                {{#each bindings}}
                                <p></p>
                                <div style="height:400px; width: 100%;">
                                    <!-- <semantic-map-classic id='location_map' fix-zoom-level="13" query='SELECT ?lat ?lng ?description ?link ?node WHERE {
                                        VALUES(?lat ?lng ?description ?link) {
                                        ("{{latitude_label.value}}" "{{longitude_label.value}}" "{{node.value}}" <http://www.wikidata.org/entity/Q22132500>)
                                  }
                                }'>
                                    </semantic-map-classic> -->
                                </div>
                                {{/each}}
                            </template>
                        </semantic-query>
                        {{/if}}
                    </div>
                    [[> rsp:FormDefaultActions]]
                </div>


                <!-- <div style='height: 35vw;'>
                    <semantic-map
                    id="feudal"
                    query='SELECT ?wkt ?description ?link WHERE {
                        VALUES(?wkt ?description ?link) {
                          (
                              "MULTIPOLYGON(((1370147.6623219263 5692797.093712564,1370146.5517211184 5692794.818928208,1370142.7101103782 5692795.716604245,1370123.4229752405 5692799.482326953,1370113.8285377035 5692803.550348826,1370113.823361051 5692803.552562495,1370103.7246837209 5692805.575262251,1370091.058981807 5692808.408938293,1370089.600418432 5692808.710037662,1370086.021347612 5692809.632693608,1370080.5171698641 5692809.83315035,1370079.019449268 5692809.853189604,1370067.8773654376 5692810.246047328,1370059.863336869 5692811.110413934,1370056.2442507108 5692813.9890226545,1370052.6827910452 5692816.821826867,1370052.6781051308 5692816.825591446,1370051.5838181786 5692817.663416713,1370051.578990137 5692817.667187163,1370046.8243459363 5692821.498595669,1370046.8196600133 5692821.502360246,1370046.8196600133 5692821.502360246,1370039.3999150707 5692828.5050932225,1370035.8676963598 5692831.872436144,1370039.0440396543 5692836.239462118,1370035.3691396378 5692839.687159794,1370031.9921667674 5692836.130886994,1370027.6956081195 5692840.963947274,1370029.9964935058 5692843.970191064,1370020.6672125086 5692852.256487701,1370020.6626745395 5692852.260389005,1370020.6865216729 5692852.296827463,1370020.7272275027 5692852.35899454,1370020.1315884495 5692852.793123129,1370019.735974652 5692853.081576429,1370019.7311348727 5692853.085061683,1370019.7595751856 5692853.125881214,1370019.7957379762 5692853.1779516125,1370018.9762702072 5692853.826444496,1370019.5486132111 5692854.493136901,1370032.9429258404 5692870.254917986,1370032.9429258404 5692870.254917986,1370037.12725928 5692875.185182259,1370037.3937696635 5692875.499202793,1370055.5720341317 5692896.833440266,1370056.4689619367 5692897.884672025,1370059.9401581197 5692901.952859994,1370061.0650778604 5692903.224071209,1370061.3626180468 5692903.560304844,1370073.540152247 5692917.321782224,1370075.4170670293 5692919.4428119855,1370076.6273900967 5692920.800197964,1370080.4922371188 5692925.135087062,1370086.8975751684 5692932.319065612,1370087.9243943698 5692933.468489641,1370087.9188146722 5692933.471291341,1370088.5333096278 5692934.158812011,1370092.8951466212 5692939.040953505,1370098.722570067 5692935.646364938,1370114.7006520948 5692926.338793434,1370116.9954052125 5692925.001963177,1370128.4434523704 5692918.333152862,1370137.0860289016 5692913.298526994,1370148.1336154921 5692906.8632244095,1370149.9748014312 5692905.790533499,1370153.6249305466 5692903.66433851,1370163.1896845778 5692898.697852467,1370166.7233611154 5692896.86314587,1370170.8296941682 5692894.7073764475,1370175.3234649699 5692892.348471543,1370176.7300635923 5692891.728114709,1370186.9921383117 5692887.20272738,1370189.6108450927 5692885.73979311,1370192.9050953295 5692883.899263342,1370193.0121181235 5692883.839417779,1370193.0591612044 5692883.813190519,1370193.0018588305 5692883.717857155,1370189.4679774719 5692877.840120082,1370187.598034865 5692874.710534761,1370184.2695758 5692868.489067103,1370183.904738264 5692867.807236356,1370183.530853703 5692866.957086788,1370181.6441645564 5692862.667201559,1370181.1593246174 5692861.853920307,1370180.158728217 5692860.174785618,1370176.4343336946 5692853.924982458,1370175.0701367506 5692851.635672756,1370172.1747297514 5692846.189785262,1370171.6029157692 5692844.964153876,1370170.1824826242 5692842.23094244,1370169.3255610398 5692840.52116052,1370164.669098976 5692831.230295188,1370161.7571946795 5692825.406576999,1370161.2910289655 5692824.468971051,1370158.9462091536 5692819.818087282,1370158.666844447 5692819.262280663,1370158.4936879154 5692818.91805561,1370158.0870765327 5692818.109828308,1370157.9855361497 5692817.907909683,1370157.777036052 5692817.4934407305,1370157.6230955957 5692817.187273478,1370157.3618994972 5692816.668282469,1370157.0285907222 5692816.00529158,1370156.6418109513 5692815.236239474,1370156.275187817 5692814.507348852,1370155.9053049437 5692813.771879608,1370155.4431939018 5692812.85324728,1370155.0879004137 5692812.14717114,1370154.5000462371 5692810.978055954,1370154.2298461504 5692810.440868414,1370153.953753549 5692809.891926049,1370153.750832857 5692809.488510969,1370153.443573718 5692808.877436714,1370153.169048836 5692808.332000581,1370152.933565404 5692807.863654572,1370152.5663158395 5692807.133361901,1370152.2159168227 5692806.421655949,1370151.8949177626 5692805.763727529,1370151.6288135573 5692805.218800518,1370151.423638846 5692804.798623878,1370150.8158650843 5692803.553485884,1370150.6898116933 5692803.295445467,1370150.5838019745 5692803.078285314,1370150.2074878723 5692802.307515931,1370149.9461995717 5692801.772388689,1370149.6847399042 5692801.236554367,1370149.321470971 5692800.492242299,1370148.8229847888 5692799.471271261,1370148.4264676683 5692798.659199948,1370147.6623219263 5692797.093712564)))" "Walldorf - WKT polygon data @ OpenStreetMap contributors, ODbL 1.0. https://osm.org/copyright" <http://www.wikidata.org/entity/Q22872>)
                        }
                      }
                      ' fix-zoom-level=16
                        map-options='{"crs":"EPSG:3857", "extent": [1368358.959761288, 5692238.026840036, 1371414.0522355612, 5693523.1243780805]}'>
                        <tiles-layer thumbnail='/assets/images/groad.jpg'
                            url='http://mt0.google.com/vt/lyrs=r&hl=en&x={x}&y={y}&z={z}' identifier='GRoadmap'
                            name='Google Roadmap' level='basemap' author="Google" location="" year="2023">
                        </tiles-layer>
                    </semantic-map>
                </div>
            


                  <h3>BIM Model</h3>
                    <div style="height:500px; border: 1px solid grey; border-radius: 2px;">
                        <bim-viewer ifcurl='/assets/ed_2.ifc'>
                    </bim-viewer>
                    </div> -->

            </bs-panel>
        </semantic-form>
    </bs-col>
</bs-row>

<style>
    .inline-composite .composite-input {
        display: block !important;
    }

    .inline-composite .composite-input>div {
        display: inline-block;
        width: 49% !important;
        margin-right: 1px;
    }

    .page__content-container {
        overflow-y: auto !important;
    }
</style>