<ol class="page-breadcrumb">
  <li>
    <mp-link title="Home" url="/">Home</mp-link>
  </li>
  <li class="active">Actors</li>
</ol>

<div class="page">
  <div class='page__body'>
    
    <semantic-search  
      categories='{
        "<http://www.w3.org/2001/XMLSchema#date>": [
          {
            "kind": "date-range",
            "datatype": "http://www.w3.org/2001/XMLSchema#dateTime",
            "queryPattern": "{
              $subject ?__relation__ ?prod.
              ?prod crm:P4_has_time-span ?date_iri .
              ?date_iri crm:P81a_end_of_the_begin ?date .
              FILTER(?date <= ?__dateEndValue__) .
              FILTER(?date >= ?__dateBeginValue__) .
            }"
          }
        ],
        "<http://www.w3.org/2001/XMLSchema#string>": [
          {
            "kind": "text",
            "datatype": "http://www.w3.org/2001/XMLSchema#string",
            "queryPattern": "{ ?subject rdfs:label|skos:prefLabel ?__value__. }"
          }
        ]
      }'
      search-profile='{ 
        "categories": [
          {
            "iri": "<http://www.w3.org/2001/XMLSchema#date>",
            "label": "Time"
          },
          {
            "iri": "<http://www.w3.org/2001/XMLSchema#string>",
            "label": "String"
          },
          {
            "iri": "<https://archipelago.itatti.harvard.edu/arconto#Builtwork>",
            "label": "Builtwork",
            "thumbnail": "../icons/Builtwork.svg"
          },
          {
            "iri": "<https://archipelago.itatti.harvard.edu/arconto#Actor>",
            "label": "Actor",
            "thumbnail": "../icons/Actor.svg"
          }
        ],
        "relations": [
          {
            "iri": "<http://www.cidoc-crm.org/cidoc-crm/P108i_was_produced_by>",
            "label": "Constructed in",
            "hasDomain": "<https://archipelago.itatti.harvard.edu/arconto#Builtwork>",
            "hasRange": "<http://www.w3.org/2001/XMLSchema#date>"
          },
          {
            "iri": "<http://www.cidoc-crm.org/cidoc-crm/P13_destroyed>",
            "label": "Destroyed in in",
            "hasDomain": "<https://archipelago.itatti.harvard.edu/arconto#Builtwork>",
            "hasRange": "<http://www.w3.org/2001/XMLSchema#date>"
          },
          {
            "iri": "<http://www.cidoc-crm.org/cidoc-crm/string>",
            "label": "Label",
            "hasDomain": "<https://archipelago.itatti.harvard.edu/arconto#Actor>",
            "hasRange": "<http://www.w3.org/2001/XMLSchema#string>"
          }
        ]
      }'
    >
      <semantic-search-query-builder><!-- 2. search definition --></semantic-search-query-builder> 
    
      <div data-flex-layout="row stretch-stretch">
        <div data-flex-self="size-1of3" style="flex: 0 0 20px;">
          <semantic-search-facet></semantic-search-facet>
        </div>

        <semantic-search-result-holder>
          <div data-flex-self="md-full">

            <semantic-search-result>
              <mp-sparql-result-counts 
                id='query-count'
                query="SELECT DISTINCT * WHERE {}"
                template='
                  {{#if hasLimit}} 
                    <bs-alert bs-style="warning">
                      Showing {{numberOfResults}} of {{totalNumberOfResults}} matches. <strong>Please, refine your search.</strong> 
                    </bs-alert>
                  {{else}}
                    <span> found {{numberOfResults}} matches </span>
                  {{/if}}'>
              </mp-sparql-result-counts>
            </semantic-search-result>

            <bs-tabs unmount-on-exit=true id='search-results' animation=false>

              <!-- Grid result -->
              <bs-tab event-key="1" title="Grid">
                <bs-alert bs-style="info"> Only entities with image representation are shown in the Grid! </bs-alert>

                <semantic-search-result>
                  <semantic-table 
                    id='grid-result'
                    query='SELECT DISTINCT ?subject WHERE { }'
                    tuple-template='{{>tupleTemplate}}'
                  >
                    <template id='tupleTemplate'>
                      <div class="rs-grid-element text-center panel panel-default">
                        <div class="panel-body">
                          <img src="{{thumbnail.value}}" style="height:120px;max-width:150px;" class="img-rounded">
                        </div>
                        <div class="panel-footer" style="position: relative">
                          <semantic-link class="grid-resource-link" iri="{{subject.value}}"></semantic-link>
                        </div>
                      </div>
                    </template>
                  </semantic-table>
                </semantic-search-result>

              </bs-tab>

              <!-- Table result -->
              <bs-tab event-key="2" title="Table">
                <semantic-search-result>
                  <semantic-table 
                    id='table-result'
                    query='SELECT DISTINCT ?subject WHERE { }'
                  >
                  </semantic-table>
                </semantic-search-result>
              </bs-tab>

            </bs-tabs>

            <!-- Downloads -->
            <bs-panel>

              <semantic-search-result>
                <mp-sparql-download id='csv-download'
                                query="SELECT * WHERE { }"
                                header="text/csv"
                                filename="csv-result.csv">
                <button class="btn btn-default">Download CSV</button>
                </mp-sparql-download>
              </semantic-search-result>

              <semantic-search-result>
                <mp-sparql-download id='json-download'
                                query="SELECT * WHERE { }"
                                header="application/sparql-results+json"
                                filename="json-result.json"
                                >
                <button class="btn btn-default">Download JSON</button>
                </mp-sparql-download>
              </semantic-search-result>
            </bs-panel>
          </div>

        </semantic-search-result-holder>
      </div>
    </semantic-search>
  </div>
</div>