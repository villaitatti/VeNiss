<div class="page">

  <div data-flex-layout="columns center-stretch">

    <div class="Header">
      <h1>List of actors</h1>
      <hr>
    </div>

    <div class="subheader">

      <!-- Primary -->
      <button class="btn btn-primary">
        <semantic-link 
          iri="http://www.researchspace.org/resource/ThinkingFrames"
          urlqueryparam-view="entity-editor"
          urlqueryparam-entity-type-config="http://www.researchspace.org/resource/system/vocab/authority_manager_config_types/data/Person"
          urlqueryparam-mode="new"
        >
          + Person
        </semantic-link>
      </button>

      <!-- Secondary -->
      <button class="btn btn-success" style="margin-left: 5px">
        <semantic-link 
          iri="http://www.researchspace.org/resource/ThinkingFrames"
          urlqueryparam-view="entity-editor"
          urlqueryparam-entity-type-config="http://www.researchspace.org/resource/system/vocab/authority_manager_config_types/data/Group"
          urlqueryparam-mode="new"
        >
          + Group
        </semantic-link>
      </button>

    </div>

    <div class="body">
      <semantic-search>
        <semantic-search-query-constant 
          query='
            SELECT DISTINCT ?subject WHERE { ?subject a veniss_ontology:Actor }'>
        </semantic-search-query-constant>

        <div data-flex-layout="row stretch-stretch">
          <div data-flex-self="size-1of3" style="flex: 0 0 20px;">
            <semantic-search-facet></semantic-search-facet>
          </div>

          <semantic-search-result-holder>
            <div data-flex-self="md-full">

              <semantic-search-result>
                <semantic-table 
                  id='table-result'
                  query='SELECT DISTINCT ?subject ?dob_label WHERE { 

                    OPTIONAL {
                      ?subject crm:P98i_was_born ?birth.
                      ?birth a crm:E67_Birth;
                          crm:P4_has_time-span/rdfs:label ?dob_label
                    }
                  } ORDER BY DESC(?dob_label)'
                  tuple-template="{{> table-row}}"
                >

                  <template id="table-row">
                    <mp-event-trigger 
                      id='{{subject.value}}-add-frame' 
                      type='Dashboard.AddFrame' 
                      data='{
                        "resourceIri": "{{subject.value}}", 
                        "viewId": "entity-editor"
                      }' 
                      targets='["thinking-frames"]'>
                      <bs-row class="clickable-row">
                        <bs-col sm="1" md="1">
                          {{>visual_representation}}
                        </bs-col>
                        <bs-col sm="7" md="7">
                          <h5><mp-label iri="{{subject.value}}"></mp-label></h5>
                          <p>
                            <em>
                              <semantic-query
                                query='SELECT ?title WHERE {
                                  ?subject crm:P1_is_identified_by ?title.
                                  ?title crm:P71i_is_listed_in <http://www.researchspace.org/resource/vocab/actor_types>
                                }'  
                              ></semantic-query>
                            </em>
                          </p>
                        </bs-col>

                        <bs-col sm="2" md="2">
                          {{#if dob_label}}
                            <p>{{dob_label.value}}</p>
                          {{/if}}
                        </bs-col>
                        
                      </bs-row>
                    </mp-event-trigger>
                  </template>

                  <template id="visual_representation">

                    <semantic-context storage="images">

                      <mp-resource-thumbnail style="height: 100px" iri='{{subject.value}}' class='detail-img'>
                          <mp-resource-thumbnail-fallback>
                              <with-types iri='{{subject.value}}'
                                      template='{{> noImage}}'
                                      [[> rsp:TypeMappings]]
                                  >
                                  <template id="noImage">
                                      <span class="rs-icon {{getValueByKey typeToImage allTypes 'rs-icon-actor_no-image'}} detail-icon-noimg" alt="{{directTypesLabels}}" title='{{directTypesLabels}}'></span>
                                  </template>
                              </with-types>
                          </mp-resource-thumbnail-fallback>
                      </mp-resource-thumbnail>

                    </semantic-context>
                    
                  </template>

                </semantic-table>
              </semantic-search-result>

            </div>
        </semantic-search-result-holder>
      </div>
    </semantic-search>
    </div>

  </div>    

</div>

<style>
  .page{
    padding-left: 20px;
    padding-right: 20px;
  }

  .search-container {
    margin-top: 10px;
  }
  .btn a{
    color: #fff!important;
  }

  .griddle-custom-row{
    display: block!important;
  }
  .clickable-row{
    padding: 10px 0;
    border-top: 1px solid lightgrey;
  }

  .clickable-row:first-child{
    border-top: none;
  }

  .clickable-row:hover{
    background-color: var(--color-primary-10);;
    cursor: pointer;
  }

  .clickable-row .detail-img{
    min-width: 80px;
    height: 80px;
    object-fit: cover;
  }

</style>